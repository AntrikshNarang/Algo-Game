<%- include('./partials/_header'); %>

<header>
    <h1 class="title">ALGO</h1>
</header>

<div class="login-box">
    <div class="login">
        <h2 class="title">Login</h2>
        <form action="/" method="POST">
            <div class="box">
                <label>Username</label>
                <input type="text" name="username" id="username" required>
            </div>
            <div class="box">
                <label>Key</label>
                <% if(roomKey === undefined) {%>
                    <input type="text" name="roomKey" id="roomKey" required>
                <% } else { %>
                    <input value="<%= roomKey %>" type="text" name="roomKey" id="roomKey" required>
                <% } %>
            </div>
            <button class="button" id="playButton">PLAY!</button>
        </form> 
        <!-- APPLY APPROPRIATE CSS TO THE ALERT TEXT  -->
        <% if(full) {%>
        <div class="full-alert">
            <p class="alert-message">The lobby you tried to join was full!</p>
        </div>
        <% } %>
    </div>
</div>

<footer>
    <h3>&copy; 2023 - ALGO</h3>
</footer>

<script>
    document.addEventListener("DOMContentLoaded", function(){

        const urlParams = new URLSearchParams(window.location.search);
        const disError = urlParams.get('disError');
        console.log('disError on the client:', disError);

        var noRoom = document.getElementById('noRoom');
        var fullRoom = document.getElementById('fullRoom');

        if (disError === '1') {
            fullRoom.style.display = "block";
        } else if (disError === '2') {
            noRoom.style.display = "block";
        }


    });

</script>

<%- include('./partials/_footer'); %>